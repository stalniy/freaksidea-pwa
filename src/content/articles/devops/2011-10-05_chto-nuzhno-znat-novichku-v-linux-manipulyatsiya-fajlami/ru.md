---
title: 'Что нужно знать новичку в Linux: манипуляция файлами'
summary: |
  Часто возникает проблема обработки нескольких файлов, например, переименование
  по шаблону или если это картинки - cropping or resizing. Именно для
  манипуляций с файлами и директориями Вам понадобятся эти знания
author: sstotskyi
categories:
  - devops
  - important
createdAt: 2011-10-05T10:33:00.000Z
meta:
  keywords:
    - linux
    - манипуляция
    - файлы
alias: chto-nuzhno-znat-novichku-v-linux-manipulyatsiya-fajlami
---

Представляю Вам часто используемые команды для манипуляции файлами и директориями

*   **cp** - копирует файлы и директории
*   **mv** - переименовывает или перемещает файлы и директории
*   **rm** - удаляет файлы и директории
*   **mkdir** - создает файлы и директории

Это базовые команды для манипуляцией файлами и директориями. Буду честен, задачи которые выполняют эти команды намного проще совершить при помощи графического интерфейса. В файловом менеджере Вы можете перетаскивать файлы/каталоги, переименовывать, копировать, удалять. Так зачем же использовать выше перечисленные команды?

Ответ прост - мощность и гибкость. Простые операции проще делать при помощи графического файлового менеджера, но сложные - будет на много проще при помощи командной строки. Например, как Вы будете копировать все CSS файлы из одной директории в другую и только те, которых не существуют в каталоге куда копируем или версия которых более новая? Достаточно сложное задание для графического файлового менеджера и достаточно простое для командной строки

##

```bash
enej@linux:/home/pub/www/vseshini$ cp -u *.css destination
```

## Шаблоны

Перед тем, как начать использовать эти команды, стоит упомянуть о шаблонах, которые делают интерфейс командной строки более гибким и мощным. Поскольку в **Shell** работа с файлами ведется достаточно часто, то он должен предоставлять простой способ группировки файлов. Шаблоны позволяют Вам выбирать файлы основываясь на группе символов. Рассмотрим их

1.  **\*** - означает любое к-во символов (0 - бесконечность)
2.  **?** - означает любой 1 символ
3.  **\[символы\]** - любой символ из группы (например, \[ae\] - значит символ "a" или "e"). Для тех, кто знаком с регулярными выражениями, будет приятной новостью, что здесь можно использовать классы символов по стандарту **POSIX**
4.  **\[!символы\]** - любой символ, которого нет в группе.

Используя шаблоны можно построить достаточно сложных критерии выборки файлов. Вот несколько примеров

1.  **g\*** - любой файл, имя которого начинается из символа "g"
2.  **b\*.txt** - любой файл, имя которого начинается на "b" и заканчивается ".txt"
3.  **Data???** - все файлы, имя которых состоит из "Data" и еще 3 любых символов
4.  **\[abc\]\*** - все файлы, имя которых начинается на "a", "b" или "c"
5.  **BACKUP.\[\[:digit:\]\]\[\[:digit:\]\]** - любой файл, имя которого начинается с "BACKUP." и за которым следует 2 числа (в стандарте POSIX \[:digit:\] - группа символов отвечающая за любое число, тоже что и \[0123456789\])

Шаблоны можно использовать с любыми командами, которые работают с файлами (это относится и к **ls** команде).

## Копирование файлов - **cp**

В своей самой простой форме эта команда просто копирует файл, если файл, куда копируем, существует он перезаписывается

```bash
enej@linux:~$ cp file1 file2
```

Во избежания перезаписывания можно использовать команду следующим образом

```bash
enej@linux:~$ cp -i file1 file2
```

Если новый файл существует, то команда спросит перезаписывать или нет. Также можно использовать для множественного копирования файлов

```bash
enej@linux:~$ cp file1 file2 file3 directory
```

Например, следующая команда скопирует весь контент директории dir1 в dir2

```bash
enej@linux:~$ cp -R dir1 dir2
```

## Перемещение - mv

Эта команда предоставляет две разные возможности, в зависимости от того как ее использовать. Умеет переименовывать и перемещать файлы. Например, переименовать файл, если файл с новым именем существует, он перезапишется

```bash
enej@linux:~$ mv filename1 filename2
```

Во избежание произвола и самовольного перезаписывания, команда по аналогии к **cp** имеет опцию **\-i**. Переместить файлы в другую директорию

```bash
enej@linux:~$ mv file1 file2 file3 directory
```

Также умеет работать с директориями

```bash
enej@linux:~$ mv dir1 dir2
```

Если каталог dir2 существует, то dir1 будет перенесен в нее, если не существует, то dir1 будет переименован в dir2.

## Создание каталогов - mkdir

Данная команда позволяет создавать каталоги и их структуры. Например, результатом выполнения следующей строки будет создание 4 директорий.

```bash
enej@linux:~$ mkdir dir1 dir2 dir3 dir4
```

Также, умеет создавать структуру каталогов

```bash
enej@linux:~$ mkdir -p dir1/dir2/dir3/dir4
```

Результатом будет также создание 4 директорий, но в с учетом указанной структуры, т.е. каталог dir1 содержит в себе остальные 3.

## Удаление - rm

Позволяет удалять каталоги и файлы. Удалить файл

```bash
enej@linux:~$ rm file
```

Удалить директорию

```bash
enej@linux:~$ rm -r dir
```

Будьте особенно осторожны с этой командой, поскольку после удаления будет невозможным восстановить информацию. Не забывайте, что здесь нет корзины, как у Windows или графических оболочках для Linux. Перед тем как использовать **rm** из шаблонами, проверьте шаблон на команде **ls**, чтобы быть на 100% уверенным какие файлы исчезнут навсегда

Также не забывайте, что более детальную информацию о команде можно получить из менуала (**man command\_name**)

По мотивам [http://linuxcommand.org](http://linuxcommand.org)
