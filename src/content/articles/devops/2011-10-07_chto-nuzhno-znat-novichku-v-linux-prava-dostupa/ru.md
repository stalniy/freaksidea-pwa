---
title: 'Что нужно знать новичку в Linux: права доступа'
summary: |
  Unix подобные операционные системы, в том числе и Linux, отличаются от других
  тем, что они не только многозадачны, но и многопользовательские. Например,
  если Ваш компьютер подключен к сети или интернет, то другие пользователи могут
  зайти в систему через telnet или ssh и управлять ею. Также они могут запустить
  X Windows сервер и управлять системой с помощью графического интерфейса.
  Исходя из этого, должен существовать механизм, который защищает одного
  пользователя системы от другого.
author: sstotskyi
categories:
  - devops
  - important
createdAt: 2011-10-07T13:00:00.000Z
meta:
  keywords:
    - linux
    - права доступа
alias: chto-nuzhno-znat-novichku-v-linux-prava-dostupa
---

Unix подобные операционные системы, в том числе и Linux, отличаются от других тем, что они не только многозадачны, но и многопользовательские.

Это значит, что компьютером могут управлять одновременно несколько пользователей. Например, если Ваш компьютер подключен к сети или интернет, то другие пользователи могут зайти в систему через **telnet** или **ssh** и управлять ею. Удаленные пользователи также могут запустить X Windows сервер и управлять системой с помощью графического интерфейса. Исходя из этого, должен существовать механизм, который защищает одного пользователя системы от другого. Поэтому и было придумано разграничение прав доступа. Для управления ими в Linux существуют несколько команд:

*   **chmod** - изменяет права доступа на файл
*   **su** - позволяет временно стать супер юзером
*   **chown** - изменяет владельца файла
*   **chgrp** - изменяет группу файла

## Права доступа на файл

В Linux используется точно такая же схема прав доступа, как в Unix. Все файлы и директории имеют права доступа для владельца файла, для группы определенных пользователей и для всех остальных. Права могут быть выданы на чтение, запись и выполнение файла (т.е. запуск, как программы).

Чтобы посмотреть права доступа на файл можно использовать команду **ls** с опцией **l**

```bash
enej@linux:~$ ls -l web.rar
-rw-r--r-- 1 enej enej 44750 2011-08-16 18:30 web.rar
```

Первая колонка как раз и отвечает за права доступа на файл. Проанализировав данный пример можно сказать

*   файл **web.rar** принадлежит пользователю **enej**
*   владелец файла (т.е. enej) имеет право на его чтение и запись
*   пользователи из группы enej могут только читать этот файл
*   все другие пользователи могут только читать файл

Посмотрим на права доступа на файл **/bin/bash**

```bash
enej@linux:~$ ls -l /bin/bash
-rwxr-xr-x 1 root root 875596 2009-09-14 08:09 /bin/bash
```

*   файл принадлежит суперпользователю и группе суперпользователя
*   владелец файла может читать, писать и выполнять файл
*   пользователи из группы и все другие пользователи могут читать и выполнять файл

Права доступа делятся на 4 множества. Первый символ - означает тип файла, следующие 3 множества (состоят из 3 символов) определяют права доступа для владельца, группы и всех остальных. Если на месте буквы в правах стоит прочерк (**\-**) - это значит что прав на выполнение этого действия нет.

##

```bash
 -    rwx    r-x    r-x
---  -----  -----  -----
 |     |      |      |
 |     |      |      +----  Права доступа для всех остальных
 |     |      |
 |     |      +-----------  Права доступа для группы
 |     |
 |     +------------------  Права достува для владельца (read, write, execute)
 |
 +------------------------ Тип файла. "-" означет, что это обычный файл.
                           "d" - директория. "l" - ссылка
```

## Изменение прав

Команда **chmod** используется для изменения прав доступа на файл или директорию. Существует 2 способа, с помощью которых можно задавать права, но я предпочитаю использовать один из них. Если рассматривать настройки прав, как последовательность битов (как их рассматривает компьютер), то все окажется просто, например

```bash
rwx rwx rwx = 111 111 111
rw- rw- rw- = 110 110 110
rwx --- --- = 111 000 000
```

Т.е. наличие буквы - это единица, прочерк - ноль. Если эту последовательность перевести у восьмеричную систему исчисления (или если попроще, то перевести каждую тройку цифр из двоичной системы в десятичную, например, 111 = 22 + 21 + 20 = 4 + 2 + 1 = 7), то получим

```php
rwx rwx rwx = 777
rw- rw- rw- = 666
rwx --- --- = 700
```

Именно такой формат чаще всего встречается при работе с правами доступа. Например, чтобы установить все права всем

```bash
enej@linux:~$ chmod 777 web.rar
```

Для тех кому это сложно понять поделюсь способом, который я сам использовал долгое время. Стоит запомнить, что права на чтение - это 4, на записть - 2, на выполнение - 1 и 0 - забрать права. И чтобы установить права для владельца только на чтение и у всех отобрать их, стоит поочередно складывать. Владелец (чтение): 4 + 0 +0 = 4, группа (нет прав): 0 + 0 + 0 = 0, все остальные (нет прав): 0 + 0 + 0 = 0, т.е. в нашем случае получаем 400.

Есть другой формат задания прав, который понимает **chmod**. Например, добавить права на запись для группы

```bash
enej@linux:~$ chmod g+w web.rar
```

Убрать права на чтение и запись у всех остальных

```bash
enej@linux:~$ chmod o-rw web.rar
```

Или убрать права на выполнение для всех

```bash
enej@linux:~$ chmod a-x web.rar
```

Более детально об этот формат можно узнать в менуале (**man chmod**).

Для директорий схема прав доступа работает также как и для файлов, за исключением прав на выполнение. Для каталогов установка права на выполнение означает разрешение на просмотр содержимого директории.

## Как стать суперюзером

Вообще не рекомендуется заходить и работать с системой под суперпользователем, поскольку можно наделать делов. По-этому на большинстве систем для рута не стоит пароль, чтобы под ним никто не вошел в систему. Но иногда приходится выполнять действия от имени рута и для этого существует 2 команды: **su** - позволяет стать суперюзером, **sudo** - позволяет выполнить команду от имени суперюзера.

```bash
enej@linux:~$ su
Password:
root@linux:/home/enej#
```

После выполнения первой команды, система спросит у нас пароль, если мы ввели верный пароль, то становимся рутом (в Linux при вводе пароля не отображаются звездочки). Для того чтобы закончить сессию суперпользователя выполните команду **exit** (в системах с графической оболочкой Gnome, того же результата можно добиться, если нажать сочетание клавиш Ctrl + D). Не все пользователи могут выполнять эту команду! Обычно это пользователи какой-то группы.

Если Вам надоело вводить пароль каждый раз при вызове команды **su**, то есть способ как этого избежать. В Ubuntu (в других может отличатся!) существует файл конфигурации **/etc/pam.d/su**, в котором можно написать (обычно оно уже написано и его нужно только раскомментировать)

```bash
auth       sufficient pam_wheel.so trust
```

Это значит, что все пользователи, которые состоят в группе **wheel**, могут вызывать команду **su** без ввода пароля. Для добавления пользователя в группу (и еще кое-что) используется команда **usermod**.

## Изменяем владельца файла

Для изменения владельца файла используется команда **chown**. Обычно для изменения владельца нужны права рута, по-этому сначала выполняем команду **su**

```bash
enej@linux:~$ su
root@linux:/home/enej# chown some_user web.rar
root@linux:/home/enej# exit
```

При помощи команды **chown**, можно также изменить и группу, указав ее после имени пользователя следующим образом

##

```bash
chown some_user:some_group web.rar
```

Изменяем группу на файл

Для даной задачи используется команда **chgrp**. По своей семантике она аналогична команде **chown**

```bash
enej@linux:~$ chgrp some_group web.rar
```

**P.S.**: команды **chmod**, **chown**, **chgrp** в качестве аргумента могут принимать бесконечное множество файлов и директорий. Также они могут принимать опции (флаги). Одним из часто используемых флагов является **\-R**, он означает рекурсивное применение команды на все файлы и подкаталоги. Например, чтобы убрать права на запись для группы из всех файлов и директорий каталога Books

```bash
enej@linux:~$ chmod -R g-w Books/
```

По мотивам [http://linuxcommand.org](http://linuxcommand.org)
